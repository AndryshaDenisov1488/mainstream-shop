# üóëÔ∏è –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –£–î–ê–õ–ï–ù–ò–Æ –ò –ü–ï–†–ï–°–û–ó–î–ê–ù–ò–Æ –ë–î –ù–ê –°–ï–†–í–ï–†–ï

## üìç –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å systemd —Å–µ—Ä–≤–∏—Å
sudo systemctl stop mainstreamfs

# –ò–ª–∏ –µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ —á–µ—Ä–µ–∑ gunicorn –Ω–∞–ø—Ä—è–º—É—é
pkill -f gunicorn
```

## üìç –®–∞–≥ 2: –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd ~/mainstreamfs.ru
# –∏–ª–∏
cd /root/mainstreamfs.ru
```

## üìç –®–∞–≥ 3: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î

```bash
# –£–¥–∞–ª–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ë–î
rm -f instance/app.db

# –£–¥–∞–ª–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
rm -f instance/app.db.backup
rm -f app.db
rm -f app_prod.db
rm -f app_dev.db

# –£–¥–∞–ª–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞)
# rm -rf migrations/versions/*.py
```

## üìç –®–∞–≥ 4: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
source venv/bin/activate
```

## üìç –®–∞–≥ 5: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ë–î

```bash
python3 create_database_final_v3.py
```

## üìç –®–∞–≥ 6: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤)

```bash
# –ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —É–∂–µ –µ—Å—Ç—å
flask db upgrade

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤
flask db migrate -m "Add indexes for performance"
flask db upgrade
```

## üìç –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω
ls -lh instance/app.db

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
sqlite3 instance/app.db "SELECT email, full_name, role FROM user;"
```

## üìç –®–∞–≥ 8: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
# –ß–µ—Ä–µ–∑ systemd
sudo systemctl start mainstreamfs
sudo systemctl status mainstreamfs

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
gunicorn -c gunicorn_config.py wsgi:application
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω: `admin@mainstreamfs.ru` / `password123`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∞–¥–º–∏–Ω–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–Ω–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ customers)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –∏ –º–∞–º–∞ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏

## üîÑ –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ (–≤—Å–µ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)

```bash
cd ~/mainstreamfs.ru && \
sudo systemctl stop mainstreamfs && \
rm -f instance/app.db instance/app.db.backup app.db app_prod.db app_dev.db && \
source venv/bin/activate && \
python3 create_database_final_v3.py && \
flask db upgrade && \
sudo systemctl start mainstreamfs && \
echo "‚úÖ –ë–î –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∞!"
```

