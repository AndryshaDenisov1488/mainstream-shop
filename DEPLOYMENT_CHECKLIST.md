# ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ì–û–¢–û–í–ù–û–°–¢–ò –ö PRODUCTION –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Æ

## ‚ùå –ß–¢–û –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨

### 1. **start_production.sh - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è —Å–∫—Ä–∏–ø—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ë–î**
   - ‚ùå –°–µ–π—á–∞—Å: `python3 create_database_final.py`
   - ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `python3 create_database_final_v3.py`

### 2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –≤–º–µ—Å—Ç–æ SQLite**
   - ‚ùå –°–µ–π—á–∞—Å: SQLite (–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production)
   - ‚úÖ –ù—É–∂–Ω–æ: PostgreSQL
   - ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å DATABASE_URL –≤ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 3. **–ü—É—Ç–∏ –≤ start_production.sh –∏ deploy/beget_setup.sh**
   - ‚ùå –°–µ–π—á–∞—Å: `/opt/mainstreamshop`
   - ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `~/mainstreamfs.ru` (–≤–∞—à–∞ —Ä–µ–∞–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)

### 4. **Gunicorn –≤ systemd service**
   - ‚ùå –°–µ–π—á–∞—Å: `ExecStart=/opt/mainstreamshop/venv/bin/python run.py`
   - ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `ExecStart=/root/mainstreamfs.ru/venv/bin/gunicorn -c gunicorn_config.py wsgi:application`

### 5. **Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è - –ø—É—Ç—å –∫ —Å—Ç–∞—Ç–∏–∫–µ**
   - ‚ùå –°–µ–π—á–∞—Å: `/opt/mainstreamshop/app/static/`
   - ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `/root/mainstreamfs.ru/app/static/`

### 6. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**
   - ‚ùå –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
   - ‚úÖ –ü—É—Ç—å: `/etc/ssl/certs/mainstreamfs.ru.crt` –∏ `/etc/ssl/private/mainstreamfs.ru.key`
   - ‚úÖ –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Let's Encrypt (certbot)

### 7. **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤ –∏ uploads**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### 8. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ .env
   - ‚úÖ SECRET_KEY –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

## ‚úÖ –ß–¢–û –£–ñ–ï –ì–û–¢–û–í–û

1. ‚úÖ WSGI —Ñ–∞–π–ª (wsgi.py) - –≥–æ—Ç–æ–≤
2. ‚úÖ Gunicorn –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (gunicorn_config.py) - –≥–æ—Ç–æ–≤
3. ‚úÖ –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ config.py
4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTPS –≤ config.py
5. ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ - –≥–æ—Ç–æ–≤–∞
6. ‚úÖ .gitignore - –≥–æ—Ç–æ–≤

---

## üîß –ß–¢–û –ù–£–ñ–ù–û –ù–ê–°–¢–†–û–ò–¢–¨ –ù–ê –°–ï–†–í–ï–†–ï

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
1. PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
2. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
3. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
4. Systemd service —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏
5. Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:
1. PM2 –≤–º–µ—Å—Ç–æ systemd (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
2. Redis –¥–ª—è rate limiting (—Å–µ–π—á–∞—Å memory://)
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

